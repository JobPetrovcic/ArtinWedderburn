% In this file you should put the actual content of the blueprint.
% It will be used both by the web and the print version.
% It should *not* include the \begin{document}
%
% If you want to split the blueprint content into several files then
% the current file can be a simple sequence of \input. Otherwise It
% can start with a \section or \chapter for instance.

\section{Current division of team work}

Summary: we have defined the necessary structures that are used in the proof. Namely, ideal products, the corner ring, and matrix units. We have proved two major auxiliary theorems that are used in the proof of the main theorem: Brauer's lemma and theorem \ref{thm:orthogonal_idempotents_division_ring_matrix}. Our next target is theorem \ref{thm:orthogonal_idempotents_division_ring} which is the last prerequisite of the main theorem. After that, we will split the proof of the main theorem into manageable parts.

\begin{itemize}
  \item \textbf{Matevž Miščič: } Has done some major parts of the proof: theorem \ref{thm:prime_ring_equiv}, properties of ideal products and set-like products, properties of corner rings, Brauer's lemma, theorem \ref{thm:all_left_inv_div_ring}, theorem \ref{thm:criterion_for_matrix_units}, and theorem \ref{thm:one_sub_e_larger_span_on_sub_e_sub_f}. Now he is helping the new members.
  \item \textbf{Maša Žaucer: } Assigned and working on theorem \ref{thm:corner_ring_artinian} and theorem \ref{thm:orthogonal_idempotents_division_ring} as an introduction to the project. After that, she will split the proof of the main theorem \ref{thm:artin_wedderburn_for_prime}. This will include setting up the definitions of subrings for which the conclusion of the statement holds. A handful of intermediary lemmas will be needed to enable the use of the artinian property.
  \item \textbf{Job Petrovčič: } Has done some major parts of the proof: initial project setup, definition of ideal products, definition of corner ring, basic properties of corner rings, definition of matrix units, and theorem \ref{thm:orthogonal_idempotents_division_ring_matrix}. Now he is helping the new members.
\end{itemize}
If time permits, we will work on the uniqueness part of the proof.

\section{Preliminaries}
\begin{definition}[Set $aRb$]
  \label{def:aRb}
  \lean{both_mul}
  \leanok
  % \uses{} % No explicit dependencies in the definition statement
  For $a, b \in R$, denote by $aRb$ the set $\{arb| r \in R\}$.
\end{definition}

\begin{definition}[Left/Right Ideal]
  \label{def:left_right_ideal}
  \lean{left_right_ideal}
  \leanok % No leanok indicated
  \uses{} % No explicit dependencies in the definition statement
  A \textit{left/right ideal} $I$ of a ring $R$ is an additive subgroup of $R$ such that $rI \subseteq I$ for all $r \in R$ or $Ir \subseteq I$ for all $r \in R$, respectively.
\end{definition}

\begin{definition}[Two-sided Ideal]
  \label{def:two_sided_ideal}
  \lean{TwoSidedIdeal}
  \leanok
  \uses{def:left_right_ideal}
  A two-sided ideal is a subset of $R$ that is both left and right ideal of $R$.
\end{definition}

\begin{definition}[Product of Ideals]
  \label{def:product_of_ideals}
  \lean{IdealProd.ring_subset_prod_ideal}
  \leanok
  \uses{def:left_right_ideal, def:two_sided_ideal}
  A product of (left/right/two-sided) ideals $I$ and $J$ is the ideal $IJ$ generated by the set of all pairwise products of elements of $I$ and $J$.
\end{definition}

\begin{definition}[Prime Ring]
  \label{def:is_prime_ring}
  \lean{IsPrimeRing}
  \leanok
  \uses{def:left_right_ideal, def:product_of_ideals}
  A ring is prime if we have $I = 0$ or $J = 0$ whenever $IJ = 0$ for some left ideals $I$ and $J$.
\end{definition}

\begin{theorem}
  \label{thm:prime_ring_equiv}
  \lean{prime_ring_equiv}
  \leanok
  \uses{def:is_prime_ring, def:aRb, def:left_right_ideal}
  A ring is prime if and only if for all $a, b \in R, aRb = 0$ implies $a = 0$ or $b = 0$.
\end{theorem}
\begin{proof}
  \leanok
  \uses{def:is_prime_ring, def:aRb, def:left_right_ideal}
  $(\Rightarrow)$ Suppose $aRb = 0$. Then $(Ra)(Rb) = 0$, thus by primality $Ra = 0$ or $Rb = 0$. In the former case we get $a = 1 \cdot a \in Ra$ and thus $a = 0$ and in the latter case we get $b = 1 \cdot b \in Rb$ and thus $b = 0$.

  $(\Leftarrow)$ Suppose $IJ = 0$. Then $aRb  \subseteq IJ = 0$ for any $a \in I$ and $b \in J$. By assumption we get $a = 0$ or $b = 0$, so at least one of $I$ and $J$ is zero.
\end{proof}

\begin{theorem}
  \label{thm:prime_ring_equiv'}
  \lean{prime_ring_equiv'}
  \leanok
  \uses{def:is_prime_ring, def:two_sided_ideal, def:product_of_ideals, thm:prime_ring_equiv}
  A ring is prime if and only if for all two-sided ideals $I$ and $J$, $IJ = 0$ implies $I = 0$ or $J = 0$.
\end{theorem}
\begin{proof}
  \leanok
  \uses{def:is_prime_ring, def:two_sided_ideal, def:left_right_ideal, thm:prime_ring_equiv, def:aRb}
  $(\Rightarrow)$ Two-sided ideals are left ideals, so the result follows directly from definiton.

  $(\Leftarrow)$ Suppose $aRb = 0$. Then $(RaR)(RbR) = 0$. By assumption $RaR = 0$ or $RbR = 0$. Thus $a = 0$ or $b = 0$ so the result follows from the previous theorem.
\end{proof}

\begin{definition}[Simple Ring]
  \label{def:IsSimpleRing}
  \lean{IsSimpleRing}
  \leanok % No leanok indicated
  \uses{def:two_sided_ideal}
  A ring is simple if it has no nontrivial two-sided ideals.
\end{definition}

\begin{theorem}
  \label{thm:simple_ring_is_prime}
  \lean{simple_ring_is_prime}
  \leanok
  \uses{def:IsSimpleRing, def:is_prime_ring, thm:prime_ring_equiv'}
  A simple ring is prime.
\end{theorem}
\begin{proof}
  \leanok
  \uses{def:IsSimpleRing, thm:prime_ring_equiv', def:two_sided_ideal, def:product_of_ideals}
  Suppose $IJ = 0$. If both $I$ and $J$ are nonzero, they must be equal to $R$ by simplicity. But $RR = R \neq 0$, a contradiction.
\end{proof}

\begin{definition}[Orthogonal Elements]
  \label{def:IsOrthogonal}
  \lean{IsOrthogonal} % Assuming lean name from comment, changed label to match
  \leanok % No leanok indicated
  % \uses{} % No explicit dependencies in the definition statement
  Two elements $a, b \in R$ are orthogonal if $ab = ba = 0$.
\end{definition}

\section{Proof of Artin-Wedderburn Theorem for prime and simple rings}
The proof is heavily based on \cite{bresar2024wedderburnartintheorem}.
\begin{theorem}
  \label{thm:one_sub_e_larger_span_on_sub_e_sub_f}
  \lean{one_sub_e_larger_span_on_sub_e_sub_f}
  \leanok
  \uses{def:IsOrthogonal, def:left_right_ideal} % Idempotent definition is implicit
  If $e, f \in R$ are orthogonal idempotents and $f \neq 0$, then the left ideal generated by $1 - e - f$ is strictly smaller than the left ideal generated by $1 - e$.
\end{theorem}
\begin{proof}
  \leanok
  \uses{def:IsOrthogonal, def:left_right_ideal} % Idempotent definition is implicit
  Note that $(1 - e - f)(1 - e) = 1 - e - f$, and hence
  $x(1 - e - f) = x(1 - e - f)(1 - e) \in R(1 - e)$
  for every $x \in R$. This proves that $R(1 - e) \supseteq R(1 - e - f)$.

  We have $f = f(1 - e) \in R(1 - e)$, while $f = x(1 - e - f)$ with $x \in R$ implies
  $0 = f(1 - f) = x(1 - e - f)(1 - f) = x(1 - e - f) = f$,
  a contradiction. Therefore, $R(1 - e) \neq R(1 - e - f)$.
\end{proof}

From here on, let $e$ and $f$ denote orthogonal idempotents in $R$.

\begin{definition}[Corner Ring Set]
  \label{def:corner_ring}
  \lean{CornerRingSet}
  \leanok % No leanok indicated
  % \uses{} % e is an idempotent, but not explicitly stated as a dependency for the set definition
  The set of the corner ring is $eRe$.
\end{definition}

\begin{theorem}
  \label{thm:characterization_of_corner_elements}
  % \lean{TODO_lean_name_char_eRf}
  \leanok
  % \uses{} % e, f are idempotents, this is implicit
  An element $x$ is in the set $e R f$ if and only if $x = e x f$.
\end{theorem}
\begin{proof}
  \leanok
  % \uses{} % Relies on e, f being idempotents
  $(\Rightarrow)$ Suppose $x \in e R f$. Then $x = e y f$ for some $y \in R$. But then $e x f = e e y f f = e y f = x$.

  $(\Leftarrow)$ Clear.
\end{proof}


\begin{theorem}
  \label{thm:characterization_of_corner_ring_elements}
  \lean{corner_ring_set_mem}
  \leanok
  \uses{def:corner_ring, thm:characterization_of_corner_elements}
  An element $x$ of $R$ is in the corner ring if and only if $x = e x e$.
\end{theorem}
\begin{proof}
  \leanok
  \uses{thm:characterization_of_corner_elements}
  Application of theorem \ref{thm:characterization_of_corner_elements}.
\end{proof}

\begin{theorem}
  \label{thm:characterization_of_corner_ring_elements'}
  \lean{x_in_corner_x_eq_e_y_e}
  \leanok
  \uses{def:corner_ring, thm:characterization_of_corner_ring_elements}
  An element $x$ of the corner ring is of the form $e y e$ for some $y \in R$.
\end{theorem}
\begin{proof}
  \leanok
  \uses{thm:characterization_of_corner_ring_elements}
  Clear from the theorem \ref{thm:characterization_of_corner_ring_elements}
\end{proof}

\begin{theorem}
  \label{thm:corner_ring_is_ring}
  % \lean{TODO_lean_name_corner_ring_is_ring}
  \leanok
  \uses{def:corner_ring, thm:characterization_of_corner_ring_elements} % or thm:characterization_of_corner_ring_elements'
  The corner ring is a (non-unital) subring of $R$. It has its own unit $e$.
\end{theorem}
\begin{proof}
  \leanok
  \uses{def:corner_ring, thm:characterization_of_corner_ring_elements} % or thm:characterization_of_corner_ring_elements'
  If $a, b \in eRe$, then $a + b = e a e + e b e = e (a + b) e$ so $eRe$ is closed under addition.
  If $a, b \in eRe$, then $a b = e a e e b e  = e a b e$, so $eRe$ is closed under multiplication.
  Distributivity and associativity are inherited from $R$.

  Since $e a = eeae = eae = a = eae = eaee = ae$ for any $a \in eRe$, $e$ is the unit of $eRe$.
\end{proof}

\begin{theorem}
  \label{thm:corner_ring_artinian}
  \lean{corner_ring_artinian}
  \leanok
  \uses{def:corner_ring, thm:corner_ring_is_ring, def:left_right_ideal} % Definition of Artinian ring is implicit
  If $R$ is left artinian, then the corner ring is left artinian.
\end{theorem}
\begin{proof}
  \leanok
  \uses{def:corner_ring, def:left_right_ideal} % Definition of Artinian ring is implicit
  Let $L_1 \supseteq L_2 \supseteq \ldots$ be a descending chain of left ideals in $eRe$. Then $ RL_1 \supseteq RL_2 \supseteq \ldots$ is a descending chain of left ideals in $R$. Since $R$ is left artinian, this chain stabilizes. But then so does $eRL_1 \supseteq eRL_2 \supseteq \ldots$. But since $eRL_i = eReL_i = L_i$, the chain $L_1 \supseteq L_2 \supseteq \ldots$ also stabilizes.
\end{proof}

\begin{theorem}
  \label{thm:corner_ring_prime}
  \lean{corner_ring_prime}
  \leanok
  \uses{def:is_prime_ring, def:corner_ring, thm:corner_ring_is_ring, thm:prime_ring_equiv}
  If $R$ is a prime ring, then the corner ring is prime.
\end{theorem}
\begin{proof}
  \leanok
  \uses{thm:prime_ring_equiv, def:corner_ring}
  Suppose $aeReb = 0$ for $a, b \in eRe$. Then $ae = a = 0$ or $eb = b = 0$ by \ref{thm:prime_ring_equiv}, and by the same theorem, the ring is prime.
\end{proof}

\begin{theorem}
  \label{thm:all_left_inv_div_ring}
  % \lean{TODO_lean_name_all_left_inv_div_ring}
  \leanok
  % \uses{} % Definitions of division ring, left invertible are implicit
  If all elements in a ring are left invertible, then the ring is a division ring.
\end{theorem}
\begin{proof}
  \leanok
  % \uses{} % Relies on definitions of left invertible, division ring
  Let $x \in R$ be arbitrary. Then $yx = 1$ for some $y \in R$. Since $y$ is left invertible, there exists some $z$ such that $zy = 1$. By uniqueness of left and right inverses of $y$ it must hold that $z = x$. Thus $x$ is invertible.
\end{proof}

\begin{theorem}[Brauer's lemma]
  \label{thm:brauer_lemma}
  \lean{minimal_ideal_I_sq_nonzero_exists_idem}
  \leanok
  \uses{def:left_right_ideal, def:corner_ring, thm:all_left_inv_div_ring} % Definition of idempotent, division ring implicit
  Suppose $L$ is a minimal (left) ideal of $R$ and $L^2 \neq 0$. Then there exists an idempotent $e \in L$ such that $L = Re$ and $eRe$ is a division ring.
\end{theorem}
\begin{proof}
  \leanok
  \uses{def:left_right_ideal, def:corner_ring, thm:all_left_inv_div_ring} % Definition of idempotent, division ring implicit
  By assumption, there exists $y \in L$ such that $Ly \neq 0$. By minimality $L = Ly$. Thus, there exists $e \in L$ such that $e y = y$. Let $J \subseteq L$ be the set of elements in $L$ that annihilate $y$ from the left.
  \begin{claim}
    $J$ is a left ideal of $R$ contained in $L$.
  \end{claim}
  \begin{proof}
    \leanok
    \uses{def:left_right_ideal}
    Let $a, b \in J$. Then $(a + b) y = a y + b y = 0$, so $(a + b) \in J$. For any $x \in R$, $x a y = 0$ so $xa \in J$.
  \end{proof}
  The element $e$ is not in $J$, therefore $J = 0$ by minimality of $L$.
  Rearranging the previous equality, $(e^2 - e) y = 0$ which implies $e^2 = e$, since $e^2 - e$ is in $J = 0$. Clearly $e \neq 0$, and so by minimality $Re = L$.

  Let $a \in eRe$ be non-zero. Then $0 \neq Ra = Reae \leq Re = L$, so $Ra = L$. Thus $e \in Ra$, so $e = r a$ for some $r \in R$. Then $e = e^2 = e r e a$, so $a$ is invertible in $eRe$. We are done by \ref{thm:all_left_inv_div_ring}
\end{proof}

\begin{theorem}
  \label{thm:artinian_has_minimal_left_ideal}
  \lean{artinian_ring_has_minimal_left_ideal_of_element}
  \leanok
  \uses{def:left_right_ideal} % Definition of Artinian ring implicit
  (Already proven in Mathlib) A nonzero left artinian ring has a minimal left ideal.
\end{theorem}
% No proof provided for the above theorem in the original document.

\begin{definition}[Set of Matrix Units]
  \label{def:matrixunits}
  \lean{hasMatrixUnits}
  \leanok
  % \uses{} % No explicit dependencies in the definition statement
  A set $e_{ij}$ for $i, j \in [1, n]$ is a \textit{set of matrix units} of $R$ if
  $$
    e_{ij}e_{kl} =
    \begin{cases}
      e_{il} & \mid j = k            \\
      0      & \mid \text{otherwise}\end{cases}
  $$
  and $\sum_{i=1}^n e_{ii} = 1$.
\end{definition}

\begin{theorem}
  \label{thm:ring_with_matrix_units}
  \lean{ring_with_matrix_units_isomorphic_to_matrix_ring}
  \leanok
  \uses{def:matrixunits, def:corner_ring}
  If $R$ has a set of matrix units $e_{ij}$, then $R$ is isomorphic to the ring of $n \times n$ matrices over the corner ring $e_{11}Re_{11}$.
\end{theorem}
\begin{proof}
  \leanok
  \uses{def:matrixunits, def:corner_ring}
  For $a \in R$, denote $a_{ij} = e_{1i}ae_{j1}$. Then $e_{11}a_{ij}e_{11} = e_{11}e_{1i}ae_{j1}e_{11} = e_{1i}ae_{j1}$ by the property of matrix units. Then, the map $\phi$ claimed to be the isomorphism is $a \mapsto (a_{ij})_{i,j=1}^n$.
  \begin{claim}
    $\phi$ is additive.
  \end{claim}
  \begin{proof}
    \leanok
    \uses{def:matrixunits}
    For $a, b \in R$, we have:
    $((a + b)_{ij})_{i,j=1}^n = (e_{1i}(a + b)e_{j1})_{i,j=1}^n = (e_{1i}ae_{j1} + e_{1i}be_{j1})_{i,j=1}^n = (a_{ij} + b_{ij})_{i,j=1}^n$
  \end{proof}
  \begin{claim}
    The map is multiplicative.
  \end{claim}
  \begin{proof}
    \leanok
    \uses{def:matrixunits}
    The $(i,j)$ entry of $\phi(a)\phi(b)$ is equal to
    $$
      \sum_{k=1}^n e_{1i}ae_{k1}e_{1k}be_{j1} = e_{1i}a \sum_{k=1}^n e_{kk} be_{j1} = e_{1i}abe_{j1},
    $$
    which is the $(i,j)$ entry of $\phi(ab)$. Therefore, $\phi(ab) = \phi(a)\phi(b)$.
  \end{proof}
  \begin{claim}
    The map is injective.
  \end{claim}
  \begin{proof}
    \leanok
    \uses{def:matrixunits}
    Suppose $a_{ij} = 0$ for all $i, j$. Then $e_{ii}ae_{jj} = e_{1i}a_{ij}e_{j1} = 0$. Therefore, $a = a(\sum_{i=1}^n e_{ii}) = \sum_{i=1}^n ae_{ii} = \sum_{i,j=1}^n e_{ii}ae_{jj} = 0$.
  \end{proof}
  \begin{claim}
    The map is surjective.
  \end{claim}
  \begin{proof}
    \leanok
    \uses{def:matrixunits, def:corner_ring}
    Note the $\phi(e_{k1}ae_{1l})_{kl} = e_{1k}e_{k1}a e_{1l}e_{l1} = e_{11}ae_{11}$ and $\phi(e_{k1}ae_{1l})_{ab} = e_{1a}e_{k1}a e_{1l}e_{b1} = 0$ if $a \neq k$ or $b \neq l$, so $\phi(e_{k1}ae_{1l})$ is a matrix whose all entries are zero, except the $k$-th and $l$-th entry is non-zero, and can take arbitrary value in $e_{11}ae_{11}$. By additivity, the map is surjective.
  \end{proof}
\end{proof}

\begin{theorem}
  \label{thm:criterion_for_matrix_units}
  \lean{OrtIdem_imply_MatUnits}
  \leanok
  \uses{def:IsOrthogonal, def:corner_ring, thm:characterization_of_corner_elements, def:matrixunits} % Idempotent definition implicit
  If a ring $R$ has a set of pairwise orthogonal idempotents $e_{ii}$ and
  \begin{itemize}
    \item $e_{1i} \in e_{11}Re_{ii}$ for all $i$,
    \item $e_{e1} \in e_{ii}Re_{11}$ for all $i$, % Original had e_e1, kept as is.
    \item $e_{1i}e_{e1} = e_{11}$ % Original had e_e1, kept as is.
    \item $e_{i1}e_{1i} = e_{ii}$ for all $i$,
  \end{itemize}
  then $R$ has matrix units.
\end{theorem}
\begin{proof}
  \leanok
  \uses{thm:characterization_of_corner_elements, def:IsOrthogonal, def:matrixunits}
  Define $f_{ij} = e_{i1}e_{1j}$.

  \begin{claim}
    For $i = 1$, we have $f_{1j} = e_{1j}$.
  \end{claim}
  \begin{proof}
    \leanok
    \uses{thm:characterization_of_corner_elements}
    $f_{1j} = e_{11}e_{1j}$. Since $e_{1j} \in e_{11}Re_{jj}$, we have $e_{11}e_{1j} = e_{1j}$ by theorem \ref{thm:characterization_of_corner_elements}.
  \end{proof}
  \begin{claim}
    For $j = 1$, we have $f_{i1} = e_{i1}$ for all $i$.
  \end{claim}
  \begin{proof}
    \leanok
    \uses{thm:characterization_of_corner_elements}
    $f_{i1} = e_{i1}e_{11}$. Since $e_{i1} \in e_{ii}Re_{11}$, we have $e_{i1}e_{11} = e_{i1}$.
  \end{proof}
  \begin{claim}
    $f_{1j} f_{k1} = \delta_{jk} f_{11}$ for all $j, k$
  \end{claim}
  \begin{proof}
    \leanok
    \uses{def:IsOrthogonal} % for e_jj e_kk = delta_jk e_jj
    $f_{1j} f_{k1} = e_{11}e_{1j}e_{k1}e_{11} = e_{1j}e_{k1} = e_{11} r e_{jj} e_{kk} r' e_{11} = \delta_{jk} e_{11}$ for some $r, r'$, where the last equality comes from the assumption that the diagonal elements are pairwise orthogonal.
  \end{proof}

  \begin{claim}
    $f_{ij} f_{kl} = \delta_{jk} f_{il}$.
  \end{claim}
  \begin{proof}
    \leanok
    % \uses{} % Uses previous claims and definitions
    By definition, $f_{ij} f_{kl} = e_{i1}e_{1j} e_{k1}e_{1l} = f_{i1}f_{1j} f_{k1}f_{1l} = \delta_{jk} f_{i1} f_{1l} = \delta_{jk} e_{i1} e_{1l} = \delta_{jk} f_{il}$ by the previous claims.
  \end{proof}
\end{proof}


\begin{theorem}
  \label{thm:orthogonal_idempotents_division_ring}
  % \lean{TODO_lean_name_ortho_idem_div_ring}
  \leanok
  \uses{def:IsOrthogonal, def:is_prime_ring, def:corner_ring, thm:prime_ring_equiv'} % Division ring def implicit
  Let $e, f \in R$ be nonzero orthogonal idempotents and $R$ a prime ring. Also let $eRe$ and $fRf$ be division rings.

  Then there exist $u, v \in R$ such that $u \in eRf$ and $v \in fRe$ such that $uv = e$ and $vu = f$.
\end{theorem}
\begin{proof}
  \leanok
  \uses{thm:prime_ring_equiv', def:corner_ring, def:IsOrthogonal} % Division ring properties implicit
  \begin{claim}
    There exists $a, b \in R$ such that $eafbe \neq 0$.
  \end{claim}
  \begin{proof}
    \leanok
    \uses{thm:prime_ring_equiv'}
    Suppose $eRf = 0$. By theorem \ref{thm:prime_ring_equiv'}, $eRf = 0$ implies $e = 0$ or $f = 0$, a contradiction. Therefore, there exists $a$ such that $eaf \neq 0$.

    Suppose $eafRe = 0$. Then $e = 0$ by theorem \ref{thm:prime_ring_equiv'}, a contradiction. Therefore, there exists $b$ such that $eafbe \neq 0$.
  \end{proof}
  Since $eRe$ is a division ring, there exists $c \in R$ such that $(eafbe)(ece) = e$. Let $u = eaf$ and $v = fbece$, which belong to $eRf$ and $fRe$ respectively. Then $uv = eafbece = e$.

  Note that $vu \in fRf$ and that $vuv = ve = v = fv$. Therefore, $(vu - f) v = 0$
  \begin{claim}
    $vu = f$.
  \end{claim}
  \begin{proof}
    \leanok
    % \uses{} % Relies on fRf being a division ring
    Suppose not. Then $vu - f \neq 0$, but $vu - f$ is left invertible since $fRf$ is a division ring. Multiplying by the left inverse, we get $v = 0 = fv$, a contradiction with the fact that $uv = e \neq 0$.
  \end{proof}
\end{proof}

\begin{theorem}
  \label{thm:orthogonal_idempotents_division_ring_matrix}
  % \lean{TODO_lean_name_ortho_idem_div_ring_matrix}
  \leanok
  \uses{def:is_prime_ring, def:IsOrthogonal, def:corner_ring, thm:orthogonal_idempotents_division_ring, thm:criterion_for_matrix_units, thm:ring_with_matrix_units} % Division ring def implicit
  If a prime ring $R$ contains pairwise orthogonal idempotents $e_{ii}$ with sum $1$ and $e_{ii}Re_{ii}$ is a division ring for every $i$, then $R$  is isomorphic to $M_n(e_{11}Re_{11})$.
\end{theorem}
\begin{proof}
  \leanok
  \uses{thm:orthogonal_idempotents_division_ring, thm:criterion_for_matrix_units, thm:ring_with_matrix_units, def:IsOrthogonal, def:corner_ring}
  Applying the theorem \ref{thm:orthogonal_idempotents_division_ring} for $e_{11}$ and each $e_{ii}$, we define $e_{1i} = u_i$ and $e_{i1} = v_i$ for each $i$ wher $u_i$ and $v_i$ correspond to $u$ and $v$ in the theorem.
  \begin{claim}
    The defined elements satisfy the conditions of theorem \ref{thm:criterion_for_matrix_units}.
  \end{claim}
  \begin{proof}
    \leanok
    \uses{thm:orthogonal_idempotents_division_ring, def:IsOrthogonal, def:corner_ring, thm:criterion_for_matrix_units}
    By the conclusion of theorem \ref{thm:orthogonal_idempotents_division_ring}, $e_{1i}e_{i1} = e_{ii}$ and $e_{i1}e_{1i} = e_{11}$ for all $i$, and $e_{1i} \in e_{11}Re_{ii}$ and $e_{i1} \in e_{ii}Re_{11}$. The $e_{ii}$ are pairwise orthogonal by assumption.
  \end{proof}
  By theorem \ref{thm:criterion_for_matrix_units}, $R$ has matrix units, and by theorem \ref{thm:ring_with_matrix_units} it is isomorphic to $M_n(e_{11}Re_{11})$.
\end{proof}

\begin{theorem}
  \label{thm:idempotents_orthogonal}
  % \lean{TODO_lean_name_idempotents_orthogonal}
  \leanok
  \uses{def:IsOrthogonal, def:corner_ring} % Idempotent definition implicit
  If $e, f \in R$ are idempotents and $f \in (1-e)R(1-e)$ they are orthogonal. Further $fRf = f(1 - e) R (1 - e) f$.
\end{theorem}
\begin{proof}
  \leanok
  \uses{def:IsOrthogonal, def:corner_ring} % Idempotent definition implicit
  $f = f(1 - e) + fe = f + fe$. Thus $fe = 0$. Similarly, $ef = 0$. Therefore, $f$ and $e$ are orthogonal.

  Note that $x \in fRf \iff \exists r, x = f r f = f \iff \exists r, x = f(1 - e) r (1 - e) f \iff x \in f(1 - e) R (1 - e) f$.
\end{proof}

\begin{theorem}[Artin Wedderburn for prime rings]
  \label{thm:artin_wedderburn_for_prime}
  \lean{ArtinWedderburnForPrime}
  \leanok
  \uses{def:is_prime_ring, thm:artinian_has_minimal_left_ideal, thm:brauer_lemma, thm:one_sub_e_larger_span_on_sub_e_sub_f, thm:corner_ring_prime, thm:corner_ring_artinian, thm:idempotents_orthogonal, thm:orthogonal_idempotents_division_ring_matrix} % Artinian, Matrix ring, Division ring defs implicit
  If $R$ is a prime ring and artinian, then $R$ is isomorphic to $M_n(D)$ for some division ring $D$.
\end{theorem}
\begin{proof}
  \leanok
  \uses{def:is_prime_ring, thm:artinian_has_minimal_left_ideal, thm:brauer_lemma, def:corner_ring, thm:one_sub_e_larger_span_on_sub_e_sub_f, thm:corner_ring_prime, thm:corner_ring_artinian, thm:idempotents_orthogonal, thm:orthogonal_idempotents_division_ring_matrix, def:left_right_ideal}
  Since $R$ is artinian, it contains a minimal nonzero left ideal $L$. If $L^2 = 0$, this would imply by the prime condition that $L = 0$, a contradiction. Therefore, $L^2 \neq 0$. By the Brauer lemma, there exists an idempotent $e \in L$ such that $L = Re_{11}$ and $e_{11}Re_{11}$ is a division ring. By theorem \ref{thm:one_sub_e_larger_span_on_sub_e_sub_f} for $e = 0$ and $f = e_{11}$ we have that $R \supsetneq R(1 - e_{11})$.

  Suppose $e_{11} \neq 1$. Then $(1 - e_{11}) R (1 - e_{11})$ is a nonzero ring. It is also prime and artinian by theorems \ref{thm:corner_ring_prime} and \ref{thm:corner_ring_artinian}. Repeating the argument for this ring, we obtain $e_{22}$ such that $e_{22}(1 - e_{11}) R (1 - e_{11})e_{22}$ is a division ring. Since $e_{22} \in (1 - e_{11}) R (1 - e_{11})$ then must be orthogonal, as by the theorem \ref{thm:idempotents_orthogonal}. Further $R (1 - e_{11}) \supsetneq R (1 - e_{11} - e_{22})$. Repeating this process, we get a sequence of $e_{ii}$ and a sequence of left ideals $R(1 - e_{11} - \ldots - e_{ii})$. By the artinian condition, this sequence must stabilize, so for some $n$, meaning that $\sum_{i = 1}^{n} e_{ii} = 1$. $e_{ii}$ are pairwise orthogonal and are idempotent. Additionally, all $e_{ii} R e_{ii}$ are division rings. By theorem \ref{thm:orthogonal_idempotents_division_ring_matrix}, $R$ is isomorphic to $M_n(e_{11}Re_{11})$.
\end{proof}

\begin{theorem}[Artin Wedderburn for simple rings]
  \label{thm:artin_wedderburn_for_simple}
  \lean{ArtinWedderburnForSimple}
  \leanok
  \uses{def:IsSimpleRing, thm:simple_ring_is_prime, thm:artin_wedderburn_for_prime} % Matrix ring, Division ring defs implicit
  If $R$ is a simple ring, then $R$ is isomorphic to $M_n(D)$ for some division ring $D$.
\end{theorem}
\begin{proof}
  \leanok
  \uses{def:IsSimpleRing, thm:simple_ring_is_prime, thm:artin_wedderburn_for_prime}
  Since $R$ is simple, it is prime. By theorem \ref{thm:artin_wedderburn_for_prime}, $R$ is isomorphic to $M_n(D)$ for some division ring $D$.
\end{proof}


\section{Generalization to semisimple ring}
In this section, we prove the following result, which clearly generalizes Artin Wedderburn to semisimple rings
\begin{theorem}
  \label{thm:semisimple_direct_product_simple_artinian}
  % \lean{TODO_lean_name_semisimple_direct_product}
  \leanok
  \uses{thm:artin_wedderburn_for_simple, def:IsSimpleRing, def:two_sided_ideal, def:left_right_ideal} % Semisimple, Artinian, idempotent defs implicit
  Let $R$ be a semisimple ring. Then, $R$ is isomorphic to a direct product of simple, artinian rings.
\end{theorem}
\begin{proof}
  \leanok
  \uses{def:IsSimpleRing, def:two_sided_ideal, def:left_right_ideal, thm:artin_wedderburn_for_simple, def:IsOrthogonal} % Semisimple, Artinian, idempotent defs implicit
  WLOG, suppose, $R$ is not simple. We know that $R$ is (left) artinian, which is a stronger condition that being (two-sided) artinian. Since it is (two-sided) artinian, it must contain a nontrivial minimal (two-sided) ideal $I$, which is therefore simple. Since $R$ is semisimple, $I$ must be a direct summand of $R$ (AS A LEFT $R$-module). Thus, $R = I \oplus J$ for some (left) ideal $J$. Then $1 = i + j$ for some $i \in I$ and $j \in J$ . Note that $I$ and $J$ are both nontrivial.
  \begin{claim}
    $I J = 0$.
  \end{claim}
  \begin{proof}
    \leanok
    \uses{def:two_sided_ideal, def:left_right_ideal}
    Suppose $x \in I J$. Then $x \in I$ since $I$ is a twosided ideal. Also $x \in J$ since $J$ is a left ideal. But then $x = 0$ since $I \cap J = 0$.
  \end{proof}

  \begin{claim}
    $i$ is an idempotent.
  \end{claim}
  \begin{proof}
    \leanok
    \uses{} % Uses previous claim (IJ=0) implicitly
    $i = i 1 = i(i + j) = i i + i j = i i$ by the previous claim.
  \end{proof}

  \begin{claim}
    $I I = I$.
  \end{claim}
  \begin{proof}
    \leanok
    \uses{def:IsSimpleRing} % Uses previous claim (i is idempotent) implicitly
    By simplicity of $I$, $I I = 0$ or $I$. Since $ i i = i$, the first case is impossible.
  \end{proof}

  \begin{claim}
    $J I = 0$.
  \end{claim}
  \begin{proof}
    \leanok
    \uses{def:left_right_ideal, def:two_sided_ideal, def:IsSimpleRing} % Uses previous claims (IJ=0, II=I) implicitly
    Note that $JI$ is spanned by the set of all pairwise products of elements of $J$ and $I$. Since $J$ is a left ideal and $I$ is a two-sided ideal, $JI$ is a two-sided ideal. Then it can be either $0$ or $I$ by simplicity of $I$.

    Suppose $JI = I$. Then $I = I I = I (J I) = (I J) I = 0 \cdot I = 0$, a contradiction.
  \end{proof}

  \begin{claim}
    $J$ is a two-sided ideal.
  \end{claim}
  \begin{proof}
    \leanok
    \uses{def:left_right_ideal, def:two_sided_ideal} % Uses previous claim (JI=0) implicitly
    We know that it is a left ideal. For arbitrary $x \in R$, write $x = x i + x j$. Let $y \in J$ be arbitrary. Then $y x = y x i + y x j = 0 + y x j \in J$, where $y x i = 0$ since it is in $J I$. Thus $J$ is also a right ideal.
  \end{proof}

  \begin{claim}
    $ R = I \times J$ as rings.
  \end{claim}
  \begin{proof}
    \leanok
    \uses{def:IsOrthogonal} % Implicitly for IJ=0, JI=0 from previous claims
    Let $x = x_i + x_j$ where $x_i = x i \in I$ and $x j \in J$. Similarly, let $y = y_i + y_j$. Then $x y = x_i y_i + x_i y_j + x_j y_i + x_j y_j = x_i y_i + x_j y_j$ since $x_i y_j = 0$ and $x_j y_i = 0$ by the previous claims. Thus, the map $x \mapsto (x_i, x_j)$ is a ring homomorphism.

    Injective: Suppose $x i = x_j = 0$. Then $x = x 1 = x (i + j) = 0$.

    Surjective: let $(x_i, x_j)\in I \times J$ be arbitrary. Let $x = x_i + x_j$. Note that $x_i = x_i i + x_i j = x_i i$ by orthogonality of $I$ and $J$. Similarly $x_j = x_j j$. Then $x i = (x_i + x_j) i = x_i i = x_i$ and similarly $x j = x_j$. Thus $(x_i, x_j)$ is the image of $x$.
  \end{proof}

  \begin{claim}
    Let $K \subseteq I$ be a left $I$-submodule of $I$, where $I$ is treated as a unital ring. Then $K$ is a left submodule of $R$.
  \end{claim}
  \begin{proof}
    \leanok
    \uses{def:left_right_ideal} % Uses JI=0 implicitly
    Let $r \in R$ and $k \in K$. Then $r k = r 1 k = r (i + j) k = r i k + r j k = r i k \in K$ since $k \in K$, $r i \in I$ and $r j k = 0$ as $j \in J$ and $k \in I$ and we know $J I = 0$. Thus $K$ is closed under left multiplication by element of $R$.
  \end{proof}

  \begin{claim}
    Both $I$ and $J$ are artinian (as rings).
  \end{claim}
  \begin{proof}
    \leanok
    \uses{def:left_right_ideal} % Uses previous claim, definition of Artinian module/ring, semisimple implies Artinian
    They are both submodules of $R$ which is assumed to be artinian. Submodules of artinian modules are artinian. Note that $R$ is artinian since it is semisimple. Thus they are artinian as left $R$-modules.

    Let $K_1 \supseteq K_2 \supseteq \ldots$ be a descending chain of left ideals (modules) in ring $I$. By the previous claim, they are also left ideals in $R$. Since $R$ is artinian, this chain stabilizes. But then so does $K_1 \supseteq K_2 \supseteq \ldots$. Thus $I$ is artinian. Same argument applies to $J$.
  \end{proof}

  \begin{claim}
    $J$ is (left) semisimple.
  \end{claim}
  \begin{proof}
    \leanok
    \uses{def:left_right_ideal} % Uses previous claim, definition of semisimple module/ring
    A submodule of a semisimple module is semisimple. Thus $J$ is semisimple as a left $R$-module. Let $K \subseteq J$ be a left $J$-submodule. Then $K$ is a left $R$-submodule by the previous claim. Since $R$ is semisimple, every submodules of a submodules has a direct complement, call it $K'$. Then $J = K \oplus K'$, as $R$-modules. Since $K'$ is a left $R$-submodule, it is also a left $J$-submodule. Thus $J$ is semisimple as a left $J$-module.
  \end{proof}

  Thus, we can repeat the process of splitting $J$ (if it is not simple) into a direct product of simple, artinian rings. Since $R$ is artinian, this process must stabilize, and we get a direct product of simple, artinian rings.

  Apply the \ref{thm:artin_wedderburn_for_simple} to each of the simple, artinian rings to get the desired result.
\end{proof}